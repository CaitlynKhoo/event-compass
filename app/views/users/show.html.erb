<%= render 'shared/user_banner'%>
<div class="container my-5">
  <div class="d-flex flex-row gap-4">
    <div>
      <div class="card p-3 gap-4" style="width: 18rem; background-color:#fefefe">
        <div class="m-auto">
          <div class="d-flex gap-3 align-items-center flex-column" style="position:relative">
            <% if @user.my_photo.attached? %>
              <%= cl_image_path(@user.my_photo.key) %>
            <% else %>
              <%= image_tag "totaro.png", alt: "Le Wagon", class:"avatar-bordered border-dark", style: "width:80px" %>
            <% end %>
            <h5 class="card-title fw-bold"><%= @user.name.capitalize %></h5>
            <div>
              <p class="text-muted"><%= @user.location %></p>
            </div>
          </div>
        </div>
        <div>
          <h6 class="fw-bold">About</h6>
          <hr />
          <div class="d-flex gap-2">
            <p><%= @user.introduction %></p>
          </div>
        </div>
        <div>
          <h6 class="fw-bold">Contact</h6>
          <hr />
          <div class="d-flex gap-2">
            <i class="primary fa-regular fa-comment-dots" title="Lets chat"></i>
            <i class="primary fa-regular fa-envelope" title="Email"></i>
            <div data-controller="photo-toggle" style="position:absolute; top:5px; right:10px">
              <%= link_to '#', style: "color: #FF914D;", data: { bs_toggle: "modal", bs_target: "#userEditModal" } do %>
                <i class="primary fa-solid fa-pen" title="Edit Profile"></i>
              <% end %>
              <%= render 'modal_user_edit' %>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex flex-column flex-fill gap-4">
      <div>
        <%= render 'tabs_comments_events' %>
      </div>
      <div>
        <h5 class="fw-bold">My Lists</h5>
        <div class="d-flex row-direction flex-wrap gap-2">
          <% @user.lists.each do |list| %>
            <div class="card shadow-sm" style="width: 12rem; background-color:#fefefe; position:relative">
              <!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
              <div class="card-body">
                <p class="card-title text-center text-dark-emphasis"><%= list.name %></p>
              </div>
              <%= link_to "", list_path(list), class: 'card-link' %>
            </div>
          <% end %>
          <% if @user == current_user%>
            <div class="card shadow-sm" style="width: 12rem; background-color:#fefefe; position:relative">
              <div class="card-body">
                <p class="card-title text-center text-dark-emphasis"><i class="fa-solid fa-plus" style="color: #4f668d;"></i></p>
              </div>
              <%= link_to "", new_list_path, class: 'card-link' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
